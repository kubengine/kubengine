"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[666],{50179:function(F,C,e){e.r(C);var v=e(96095),M=e(85893),R=function(){return(0,M.jsx)(v.l,{name:v.J.Chart,nameAlias:"Helm\u6A21\u677F"})};C.default=R},96095:function(F,C,e){e.d(C,{J:function(){return d},l:function(){return ue}});var v=e(97857),M=e.n(v),R=e(15009),u=e.n(R),H=e(99289),O=e.n(H),Y=e(5574),E=e.n(Y),A=e(62832),G=e(10981),J=e(99611),V=e(48689),N=e(68795),j=e(88484),T=e(88026),x=e(25593),m=e(2453),f=e(83622),Q=e(98081),X=e(86738),w=e(4393),k=e(25278),q=e(74330),ee=e(61182),te=e(32983),ae=e(17788),ne=e(2058),re=e(96074),se=e(27484),_e=e.n(se),i=e(67294),t=e(85893),oe=x.Z.Title,le=x.Z.Text,d={Chart:"charts",Image:"apps"},ue=function(I){var y=I.name,s=y===void 0?"":y,U=I.nameAlias,ie=U===void 0?"":U,de=(0,i.useState)(!0),B=E()(de,2),ce=B[0],K=B[1],Ee=(0,i.useState)([]),L=E()(Ee,2),me=L[0],he=L[1],pe=(0,i.useState)(""),W=E()(pe,2),P=W[0],fe=W[1],Pe=(0,i.useState)({current:1,pageSize:10}),Z=E()(Pe,2),De=Z[0],Ce=Z[1],ve=(0,i.useState)(0),S=E()(ve,2),Me=S[0],z=S[1],Oe=(0,i.useState)(!1),b=E()(Oe,2),ge=b[0],$=b[1],g=function(){var _=O()(u()().mark(function n(){var a,o,r,h,l,c=arguments;return u()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return a=c.length>0&&c[0]!==void 0?c[0]:1,o=c.length>1&&c[1]!==void 0?c[1]:10,K(!0),D.next=5,A.Z.ArtifactsController.get_repositories(s,P?"name".concat(encodeURIComponent("="),"~").concat(P):"",o,a);case 5:r=D.sent,h=r.code,l=r.data,h==200?(he(l),P&&z(l.length)):m.ZP.error("\u83B7\u53D6\u4ED3\u5E93\u5217\u8868\u5931\u8D25"),K(!1);case 10:case"end":return D.stop()}},n)}));return function(){return _.apply(this,arguments)}}(),Re=function(){var _=O()(u()().mark(function n(){var a,o,r;return u()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,A.Z.ArtifactsController.get_projects(s);case 2:a=l.sent,o=a.code,r=a.data,o==200?z(r.repo_count):m.ZP.error("\u83B7\u53D6".concat(s,"\u4ED3\u5E93\u5931\u8D25"));case 6:case"end":return l.stop()}},n)}));return function(){return _.apply(this,arguments)}}();(0,i.useEffect)(function(){g(),Re()},[P]);var Ae=function(){var _=O()(u()().mark(function n(a){var o,r,h,l;return u()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return o=encodeURIComponent(encodeURIComponent(a.replace(new RegExp("^".concat(s,"/")),""))),p.next=3,A.Z.ArtifactsController.del_repositories(s,o);case 3:r=p.sent,h=r.code,l=r.message,h==200?(m.ZP.success("\u4ED3\u5E93\u5220\u9664\u6210\u529F"),g()):m.ZP.error(l);case 7:case"end":return p.stop()}},n)}));return function(a){return _.apply(this,arguments)}}(),je=[{title:"\u4ED3\u5E93\u540D\u79F0",dataIndex:"name",key:"name",width:200,render:function(n,a){return(0,t.jsx)(f.ZP,{type:"link",onClick:function(){var r=encodeURIComponent(a.name.replace(new RegExp("^".concat(s,"/")),""));T.history.push("/artifacts/list/".concat(s,"/").concat(r))},children:n.replace(new RegExp("^".concat(s,"/")),"")})}},{title:"\u5236\u54C1\u6570",dataIndex:"artifact_count",key:"artifact_count",width:120},{title:"\u4E0B\u8F7D\u6570",dataIndex:"pull_count",key:"pull_count",width:250},{title:"\u6700\u8FD1\u53D8\u66F4\u65F6\u95F4",dataIndex:"update_time",key:"update_time",width:120,render:function(n){return _e()(n).format("YYYY-MM-DD HH:mm")}},{title:"\u64CD\u4F5C",key:"action",width:200,render:function(n,a){return(0,t.jsxs)(Q.Z,{size:"small",children:[(0,t.jsx)(f.ZP,{type:"text",size:"small",icon:(0,t.jsx)(J.Z,{}),onClick:function(){var r=encodeURIComponent(a.name.replace(new RegExp("^".concat(s,"/")),""));T.history.push("/artifacts/list/".concat(s,"/").concat(r))},children:"\u67E5\u770B\u5236\u54C1"}),(0,t.jsx)(X.Z,{title:"\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u4E2A\u4ED3\u5E93\u5417\uFF1F",onConfirm:function(){return Ae(a.name)},okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",children:(0,t.jsx)(f.ZP,{type:"text",size:"small",icon:(0,t.jsx)(V.Z,{}),danger:!0,children:"\u5220\u9664"})})]})}}],Te=function(n,a){Ce({current:n,pageSize:a}),g(n,a)},xe=function(){var _=O()(u()().mark(function n(a){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:a.file.status==="done"?(m.ZP.success("Chart ".concat(a.file.name," \u4E0A\u4F20\u6210\u529F")),g()):a.file.status==="error"&&m.ZP.error(a.file.response.message);case 1:case"end":return r.stop()}},n)}));return function(a){return _.apply(this,arguments)}}();return(0,t.jsxs)(w.Z,{children:[(0,t.jsx)("div",{style:{marginBottom:16,display:"flex",justifyContent:"space-between"},children:(0,t.jsxs)(oe,{level:2,style:{margin:0},children:[ie,"\u4ED3\u5E93\u7BA1\u7406"]})}),(0,t.jsxs)("div",{style:{marginBottom:16,display:"flex",gap:8},children:[(0,t.jsx)(k.Z,{placeholder:"\u641C\u7D22\u4ED3\u5E93\u540D\u79F0",prefix:(0,t.jsx)(N.Z,{}),value:P,onChange:function(n){return fe(n.target.value)},style:{width:300}}),(0,t.jsx)(f.ZP,{type:"primary",icon:(0,t.jsx)(j.Z,{}),onClick:function(){return $(!0)},children:s==d.Chart?"\u4E0A\u4F20Chart":"\u4E0A\u4F20\u955C\u50CF"})]}),(0,t.jsx)(q.Z,{spinning:ce,children:(0,t.jsx)(ee.Z,{dataSource:me,columns:je,rowKey:"id",pagination:M()(M()({},De),{},{showSizeChanger:!0,total:Me,onChange:Te}),scroll:{x:1100},size:"middle",locale:{emptyText:(0,t.jsx)(te.Z,{description:"\u6682\u65E0\u4ED3\u5E93\u6570\u636E"})}})}),(0,t.jsxs)(ae.Z,{title:s==d.Chart?"\u4E0A\u4F20Helm Chart":"\u4E0A\u4F20\u955C\u50CF",open:ge,onCancel:function(){return $(!1)},footer:null,destroyOnHidden:!0,children:[(0,t.jsx)(ne.Z,{name:"file",action:s==d.Chart?"/api/v1/artifacts/upload/chart":"/api/v1/artifacts/upload/image",headers:{Authorization:"".concat((0,G.Oj)())},onChange:xe,accept:s==d.Chart?".tgz,.tar.gz":".tar,tar.gz,.tgz",multiple:!0,children:(0,t.jsx)(f.ZP,{icon:(0,t.jsx)(j.Z,{}),children:s==d.Chart?"\u9009\u62E9Chart\u5305(.tgz/.tar.gz)":"\u9009\u62E9\u955C\u50CF\u6587\u4EF6(.tar/.tar.gz/.tgz)"})}),(0,t.jsx)(re.Z,{}),(0,t.jsx)(le,{type:"secondary",children:s==d.Chart?"\u63D0\u793A:\u4EC5\u652F\u6301\u6807\u51C6Helm Chart\u5305\u683C\u5F0F(.tgz/.tar.gz),\u8BF7\u6CE8\u610F\u8C03\u6574chart\u4E2D\u955C\u50CF\u4FE1\u606F":"\u63D0\u793A\uFF1A\u4EC5\u652F\u6301\u6807\u51C6OCI\u6807\u51C6\u955C\u50CF,\u6587\u4EF6\u540D\u4EE5tar\u7ED3\u5C3E,\u4E14\u955C\u50CFname\u5E94\u4E3Akubekylin.io/apps/xxx"})]})]})}}}]);
